<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sasaya先生、台湾へようこそ！</title>
    <link rel="icon" type="image/jpeg" href="https://ih1.redbubble.net/image.559674332.6148/st,small,507x507-pad,600x600,f8f8f8.u4.jpg">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', 'Noto Sans JP', sans-serif;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .quiz-option {
            transition: all 0.2s ease-in-out;
        }
        .quiz-option:hover:not(:disabled) {
            background-color: #fde68a;
            transform: scale(1.05);
        }
        .quiz-option:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }
        .correct {
            background-color: #4ade80 !important;
            color: white !important;
        }
        .incorrect {
            background-color: #f87171 !important;
            color: white !important;
        }
        .lang-switch button.active-lang {
            font-weight: bold;
            color: #0d9488;
            text-decoration: underline;
        }
        .hero-overlay {
            backdrop-filter: blur(2px);
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Header Section -->
    <header class="bg-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="text-2xl font-bold text-teal-600 flex items-center gap-3">
                <img src="https://i.ibb.co/23PCrhKf/IMG-1610.jpg" alt="Ryan Icon" class="rounded-full w-10 h-10 object-cover">
                <span>for Sasaya先生</span>
            </div>
            <div class="flex items-center">
                <div class="hidden md:flex space-x-8 mr-8">
                    <a href="#about-us" data-key="nav_about" class="text-gray-600 hover:text-teal-500 transition duration-300">我們的介紹</a>
                    <a href="#itinerary" data-key="nav_plan" class="text-gray-600 hover:text-teal-500 transition duration-300">我們的約定</a>
                    <a href="#gemini-fun-facts" data-key="nav_gemini" class="text-gray-600 hover:text-teal-500 transition duration-300">AI 導遊</a>
                    <a href="#memories" data-key="nav_memories" class="text-gray-600 hover:text-teal-500 transition duration-300">回憶精選</a>
                    <a href="#quiz" data-key="nav_quiz" class="text-gray-600 hover:text-teal-500 transition duration-300">趣味小測驗</a>
                    <a href="#messages" data-key="nav_messages" class="text-gray-600 hover:text-teal-500 transition duration-300">給您的話</a>
                </div>
                <div class="lang-switch text-sm text-gray-500">
                    <button id="lang-zh" class="hover:text-teal-600">繁體中文</button>
                    <span>|</span>
                    <button id="lang-ja" class="hover:text-teal-600">日本語</button>
                </div>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="py-32 md:py-48 relative overflow-hidden text-white" style="background-image: url('https://i.postimg.cc/Wbx2n941/IMG-1628.jpg'); background-size: cover; background-position: center;">
        <div class="absolute inset-0 bg-black bg-opacity-50 hero-overlay"></div>
        <div class="container mx-auto px-6 text-center z-10 relative">
            <h1 class="text-4xl md:text-6xl font-bold mb-4" data-key="hero_title" style="text-shadow: 2px 2px 6px rgba(0,0,0,0.7);">
                Sasaya先生、台湾へようこそ！
            </h1>
            <p class="text-lg md:text-xl" data-key="hero_subtitle" style="text-shadow: 1px 1px 4px rgba(0,0,0,0.7);">
                我們好想您！終於等到您要來台灣和我們見面了！
            </p>
        </div>
        <img src="https://i.postimg.cc/ZqnPPKsN/6f76bfa4b2ca165b480c9c1907e6eb-unscreen.gif" alt="等待的Ryan" class="absolute -bottom-4 right-5 md:right-10 w-32 md:w-48 z-10">
    </section>

    <!-- Main Content -->
    <main class="container mx-auto px-6 py-16">

        <!-- About Us Section -->
        <section id="about-us" class="mb-20">
            <h2 class="text-3xl font-bold text-center mb-12" data-key="about_title">來自嘉義大學的我們</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                <div class="bg-white rounded-lg shadow-lg p-6 text-center transition duration-300 card-hover"><img src="https://i.postimg.cc/SsYwvd50/IMG-0217.jpg" alt="葉怡嫻的照片" class="w-32 h-32 rounded-full mx-auto mb-4 border-4 border-teal-200 object-cover"><h3 class="text-xl font-bold mb-2">葉怡嫻 (Elain)</h3><p class="text-gray-600" data-key="student_a_desc">sasaya老師，快看有史迪奇，可愛的史迪奇。</p></div>
                <div class="bg-white rounded-lg shadow-lg p-6 text-center transition duration-300 card-hover"><img src="https://i.postimg.cc/G38cWJYk/IMG-0214.jpg" alt="朱書靚的照片" class="w-32 h-32 rounded-full mx-auto mb-4 border-4 border-sky-200 object-cover"><h3 class="text-xl font-bold mb-2">朱書靚 (Jessica)</h3><p class="text-gray-600" data-key="student_b_desc">狗…哪裡？！讓我看看，讓我摸摸！</p></div>
                <div class="bg-white rounded-lg shadow-lg p-6 text-center transition duration-300 card-hover"><img src="https://i.postimg.cc/zGd6D4YG/IMG-0215.jpg" alt="劉芷瑩的照片" class="w-32 h-32 rounded-full mx-auto mb-4 border-4 border-red-200 object-cover"><h3 class="text-xl font-bold mb-2">劉芷瑩 (Laura)</h3><p class="text-gray-600" data-key="student_c_desc">巧…克…力，我需要巧克力……給我！</p></div>
                <div class="bg-white rounded-lg shadow-lg p-6 text-center transition duration-300 card-hover"><img src="https://i.postimg.cc/Pq97YZqF/IMG-0216.jpg" alt="陳品瑜的照片" class="w-32 h-32 rounded-full mx-auto mb-4 border-4 border-amber-200 object-cover"><h3 class="text-xl font-bold mb-2">陳品瑜 (Phoebe)</h3><p class="text-gray-600" data-key="student_d_desc">我想要吃菜(⁠ﾉ⁠°0⁠°)⁠ﾉ，為什麼沒有蔬菜！</p></div>
            </div>
        </section>

        <!-- Itinerary Section -->
        <section id="itinerary" class="mb-20">
            <h2 class="text-3xl font-bold text-center mb-12" data-key="plan_title">與您相約的午後</h2>
            <div class="max-w-2xl mx-auto bg-white rounded-xl shadow-lg p-8 text-center">
                <img src="https://cdn.dribbble.com/userupload/42120652/file/original-2802769671ecc4217aae26326ded033b.gif" alt="Tofu Pudding Date" class="mx-auto h-24 w-24 rounded-full object-cover border-4 border-amber-300">
                <h3 class="text-2xl font-bold mt-4 mb-2" data-key="plan_subtitle">我們的豆花之約</h3>
                <p class="text-gray-600 leading-relaxed" data-key="plan_desc">教授，雖然我們課業繁忙，只能空出一個下午的時間，但我們心中最想做的事，就是和您一起去吃我們最愛的嘉義豆花，好好地聊一聊彼此的近況。<br><br>我們也為您準備了一份充滿心意的小禮物，希望能給您一個驚喜！</p>
            </div>
        </section>

        <!-- Gemini API Section -->
        <section id="gemini-fun-facts" class="mb-20">
            <h2 class="text-3xl font-bold text-center mb-4" data-key="gemini_title">✨ 嘉義風情話</h2>
            <p class="text-center text-gray-600 mb-8" data-key="gemini_subtitle">對嘉義或台灣有什麼好奇的嗎？讓 AI 為您解答！</p>
            <div class="max-w-2xl mx-auto bg-white rounded-xl shadow-lg p-8">
                <div class="flex flex-col sm:flex-row gap-4 mb-4">
                    <input type="text" id="gemini-prompt" class="flex-grow border-2 border-gray-300 rounded-lg p-3 focus:ring-teal-500 focus:border-teal-500" placeholder="例如：嘉義有什麼必買的伴手禮？">
                    <button id="gemini-submit" class="bg-teal-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-teal-600 transition duration-300 shadow-lg flex items-center justify-center">
                        <span data-key="gemini_button">發問！</span>
                    </button>
                </div>
                <div id="gemini-loading" class="text-center text-gray-500 hidden my-4">
                    <svg class="animate-spin h-5 w-5 mr-3 inline-block" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                    <span data-key="gemini_loading">AI 思考中...</span>
                </div>
                <div id="gemini-response" class="mt-4 bg-gray-100 rounded-lg p-4 text-gray-700 min-h-[50px]"></div>
            </div>
        </section>

        <!-- Memories Section -->
        <section id="memories" class="mb-20 text-center">
            <h2 class="text-3xl font-bold text-center mb-4" data-key="memories_title">我們的印尼回憶精選</h2>
            <p class="text-center text-gray-600 mb-12" data-key="memories_subtitle">這裡是一些我們特別喜歡的瞬間！</p>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="overflow-hidden rounded-lg shadow-md"><img src="https://i.ibb.co/MyPWF8Rp/IMG-1503.jpg" alt="印尼回憶 1" class="w-full h-full object-cover transform hover:scale-110 transition duration-300"></div>
                <div class="overflow-hidden rounded-lg shadow-md"><img src="https://i.ibb.co/C3HLvLQ3/IMG-1628.jpg" alt="印尼回憶 2" class="w-full h-full object-cover transform hover:scale-110 transition duration-300"></div>
                <div class="overflow-hidden rounded-lg shadow-md"><img src="https://i.ibb.co/7dGKFs7f/IMG-9170.jpg" alt="印尼回憶 3" class="w-full h-full object-cover transform hover:scale-110 transition duration-300"></div>
                <div class="overflow-hidden rounded-lg shadow-md"><img src="https://i.ibb.co/mCQFhzCJ/IMG-9251.jpg" alt="印尼回憶 4" class="w-full h-full object-cover transform hover:scale-110 transition duration-300"></div>
            </div>
            <a href="gallery.html" class="mt-8 inline-block bg-teal-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-teal-600 transition duration-300 shadow-lg" data-key="memories_button">查看完整相簿 &rarr;</a>
        </section>
        
        <!-- Quiz Section -->
        <section id="quiz" class="mb-20">
            <h2 class="text-3xl font-bold text-center mb-12" data-key="quiz_title">關於我們的趣味小測驗</h2>
            <div class="max-w-2xl mx-auto space-y-8">
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <p class="font-bold text-lg mb-4" data-key="q1_text">問題一：請問，我們之中誰最喜歡找國鴻教授聊天?</p>
                    <div id="q1-options" class="grid grid-cols-2 gap-4">
                        <button data-answer="A" class="quiz-option bg-gray-200 p-3 rounded-lg font-semibold">葉怡嫻 (Elain)</button>
                        <button data-answer="B" class="quiz-option bg-gray-200 p-3 rounded-lg font-semibold">朱書靚 (Jessica)</button>
                        <button data-answer="C" class="quiz-option bg-gray-200 p-3 rounded-lg font-semibold">劉芷瑩 (Laura)</button>
                        <button data-answer="D" class="quiz-option bg-gray-200 p-3 rounded-lg font-semibold">陳品瑜 (Phoebe)</button>
                    </div>
                    <p id="q1-result" class="mt-4 font-bold hidden"></p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <p class="font-bold text-lg mb-4" data-key="q2_text">問題二：哪個是印尼的「謝謝」？</p>
                    <div id="q2-options" class="grid grid-cols-2 gap-4">
                        <button data-answer="A" class="quiz-option bg-gray-200 p-3 rounded-lg font-semibold" data-key="q2_op1">Sama-sama</button>
                        <button data-answer="B" class="quiz-option bg-gray-200 p-3 rounded-lg font-semibold" data-key="q2_op2">Halo</button>
                        <button data-answer="C" class="quiz-option bg-gray-200 p-3 rounded-lg font-semibold" data-key="q2_op3">Terima kasih</button>
                        <button data-answer="D" class="quiz-option bg-gray-200 p-3 rounded-lg font-semibold" data-key="q2_op4">Selamat pagi</button>
                    </div>
                    <p id="q2-result" class="mt-4 font-bold hidden"></p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <p class="font-bold text-lg mb-4" data-key="q3_text">問題三：我們約好要一起去吃什麼台灣甜點呢？</p>
                    <div id="q3-options" class="grid grid-cols-2 gap-4">
                        <button data-answer="A" class="quiz-option bg-gray-200 p-3 rounded-lg font-semibold" data-key="q3_op1">珍珠奶茶</button>
                        <button data-answer="B" class="quiz-option bg-gray-200 p-3 rounded-lg font-semibold" data-key="q3_op2">芒果冰</button>
                        <button data-answer="C" class="quiz-option bg-gray-200 p-3 rounded-lg font-semibold" data-key="q3_op3">豆花</button>
                        <button data-answer="D" class="quiz-option bg-gray-200 p-3 rounded-lg font-semibold" data-key="q3_op4">車輪餅</button>
                    </div>
                    <p id="q3-result" class="mt-4 font-bold hidden"></p>
                </div>
            </div>
        </section>

        <!-- Messages Section -->
        <section id="messages">
            <h2 class="text-3xl font-bold text-center mb-12" data-key="messages_title">我們有話想對您說...</h2>
            <div class="space-y-8 max-w-4xl mx-auto">
                <div class="bg-white p-6 rounded-lg shadow-md flex items-start space-x-4"><img src="https://i.postimg.cc/SsYwvd50/IMG-0217.jpg" class="w-16 h-16 rounded-full flex-shrink-0 object-cover" alt="葉怡嫻 的頭像"><div><h4 class="font-bold text-lg text-teal-700" data-key="msg_a_from">來自 葉怡嫻 (Elain) 的訊息</h4><p class="text-gray-600 mt-2" data-key="msg_a_content">「Sasaya～～網站是我做的喔😉 娃娃是朱書靚跟劉芷瑩做的～ 我們搞很久呦 還有你怎麼可以豆花偷跑 我們的豆花之約呢？🤔」</p></div></div>
                <div class="bg-white p-6 rounded-lg shadow-md flex items-start space-x-4"><img src="https://i.postimg.cc/G38cWJYk/IMG-0214.jpg" class="w-16 h-16 rounded-full flex-shrink-0 object-cover" alt="朱書靚 的頭像"><div><h4 class="font-bold text-lg text-sky-700" data-key="msg_b_from">來自 朱書靚 (Jessica) 的訊息</h4><p class="text-gray-600 mt-2" data-key="msg_b_content">「老師，我覺得嘉義布袋的肉圓比彰化的好吃」</p></div></div>
                <div class="bg-white p-6 rounded-lg shadow-md flex items-start space-x-4"><img src="https://i.postimg.cc/zGd6D4YG/IMG-0215.jpg" class="w-16 h-16 rounded-full flex-shrink-0 object-cover" alt="劉芷瑩 的頭像"><div><h4 class="font-bold text-lg text-red-700" data-key="msg_c_from">來自 劉芷瑩 (Laura) 的訊息</h4><p class="text-gray-600 mt-2" data-key="msg_c_content">「老師！好可惜連假有事失去一起出去玩的機會嗚嗚嗚，之後還有機會的話，一起約國鴻老師出來玩吧！」</p></div></div>
                <div class="bg-white p-6 rounded-lg shadow-md flex items-start space-x-4"><img src="https://i.postimg.cc/Pq97YZqF/IMG-0216.jpg" class="w-16 h-16 rounded-full flex-shrink-0 object-cover" alt="陳品瑜 的頭像"><div><h4 class="font-bold text-lg text-amber-700" data-key="msg_d_from">來自 陳品瑜 (Phoebe) 的訊息</h4><p class="text-gray-600 mt-2" data-key="msg_d_content">「老師～既然豆花吃完了，那你喜歡哪一間嘉義雞肉飯？一起去吃嗎？😄」</p></div></div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white mt-20">
        <div class="container mx-auto px-6 py-8 text-center">
            <p class="text-2xl font-bold mb-2" data-key="footer_greeting">期待與您在台灣相見！</p>
            <div class="mt-4">
                <p data-key="footer_contact">有任何問題，請隨時聯絡我們！</p>
                <p class="text-gray-400 mt-2">
                    <span data-key="footer_contact_info_text">聯絡方式：</span>
                    <a href="https://www.instagram.com/cpy__917/" target="_blank" class="text-teal-300 hover:underline">@cpy__917</a>
                </p>
            </div>
        </div>
    </footer>

    <script>
        const translations = {
            zh: {
                nav_about: '我們的介紹', nav_plan: '我們的約定', nav_gemini: 'AI 導遊', nav_memories: '回憶精選', nav_quiz: '趣味小測驗', nav_messages: '給您的話',
                hero_title: 'Sasaya先生、台湾へようこそ！', hero_subtitle: '我們好想您！終於等到您要來台灣和我們見面了！',
                about_title: '來自嘉義大學的我們',
                student_a_desc: 'sasaya老師，快看有史迪奇，可愛的史迪奇。',
                student_b_desc: '狗…哪裡？！讓我看看，讓我摸摸！',
                student_c_desc: '巧…克…力，我需要巧克力……給我！',
                student_d_desc: '我想要吃菜(⁠ﾉ⁠°0⁠°)⁠ﾉ，為什麼沒有蔬菜！',
                plan_title: '與您相約的午後', plan_subtitle: '我們的豆花之約',
                plan_desc: '教授，雖然我們課業繁忙，只能空出一個下午的時間，但我們心中最想做的事，就是和您一起去吃我們最愛的嘉義豆花，好好地聊一聊彼此的近況。<br><br>我們也為您準備了一份充滿心意的小禮物，希望能給您一個驚喜！',
                gemini_title: '✨ 嘉義風情話', gemini_subtitle: '對嘉義或台灣有什麼好奇的嗎？讓 AI 為您解答！', gemini_button: '發問！', gemini_loading: 'AI 思考中...',
                memories_title: '我們的印尼回憶精選', memories_subtitle: '這裡是一些我們特別喜歡的瞬間！', memories_button: '查看完整相簿 &rarr;',
                quiz_title: '關於我們的趣味小測驗',
                q1_text: '問題一：請問，我們之中誰最喜歡找國鴻教授聊天?',
                q2_text: '問題二：哪個是印尼的「謝謝」？',
                q2_op1: 'Sama-sama', q2_op2: 'Halo', q2_op3: 'Terima kasih', q2_op4: 'Selamat pagi',
                q3_text: '問題三：我們約好要一起去吃什麼台灣甜點呢？',
                q3_op1: '珍珠奶茶', q3_op2: '芒果冰', q3_op3: '豆花', q3_op4: '車輪餅',
                quiz_correct: '答對了！您真了解我們！', quiz_incorrect: '答錯了，不過沒關係！',
                messages_title: '我們有話想對您說...',
                msg_a_from: '來自 葉怡嫻 (Elain) 的訊息', msg_a_content: "「Sasaya～～網站是我做的喔(⁎⁍̴̛ᴗ⁍̴̛⁎) 娃娃是朱書靚跟劉芷瑩做的～ 我們搞很久呦 還有你怎麼可以豆花偷跑 我們的豆花之約呢？(´･Д･)」」",
                msg_b_from: '來自 朱書靚 (Jessica) 的訊息', msg_b_content: "「老師，我覺得嘉義布袋的肉圓比彰化的好吃」",
                msg_c_from: '來自 劉芷瑩 (Laura) 的訊息', msg_c_content: "「老師！好可惜連假有事失去一起出去玩的機會嗚嗚嗚，之後還有機會的話，一起約國鴻老師出來玩吧♪」",
                msg_d_from: '來自 陳品瑜 (Phoebe) 的訊息', msg_d_content: "「老師～既然豆花吃完了，那你喜歡哪一間嘉義雞肉飯？一起去吃嗎？*(*´∀｀*)☆」",
                footer_greeting: '期待與您在台灣相見！', 
                footer_contact: '有任何問題，請隨時聯絡我們！', 
                footer_contact_info_text: '聯絡方式：',
            },
            ja: {
                nav_about: '私たちの紹介', nav_plan: '私たちの約束', nav_gemini: 'AIガイド', nav_memories: '思い出のベストショット', nav_quiz: 'ミニクイズ', nav_messages: '先生へのメッセージ',
                hero_title: 'Sasaya先生、台湾へようこそ！', hero_subtitle: '先生に会いたかったです！やっと台湾で再会できるのを、心から待っていました！',
                about_title: '嘉義大学の私たち',
                student_a_desc: 'sasaya先生、見て見てスティッチがいるよ、可愛いスティッチ！',
                student_b_desc: '犬…どこ？！見せて、触らせて！',
                student_c_desc: 'チョ…コ…レート、チョコレートが必要……ちょうだい！',
                student_d_desc: '野菜が食べたい(⁠ﾉ⁠°0⁠°)⁠ﾉ、どうして野菜がないの！',
                plan_title: '午後の約束', plan_subtitle: '私たちの豆花デート',
                plan_desc: '先生、授業で忙しく、午後の時間しか取れませんが、私たちが一番したいことは、先生と一緒に大好きな嘉義の豆花を食べながら、近況を語り合うことです。<br><br>心ばかりのプレゼントも用意しましたので、サプライズになれば嬉しいです！',
                gemini_title: '✨ 嘉義の豆知識', gemini_subtitle: '嘉義や台湾について何か知りたいことはありますか？AIにお任せください！', gemini_button: '質問する', gemini_loading: 'AIが考えています...',
                memories_title: '私たちのインドネシア思い出のベストショット', memories_subtitle: '私たちが特に気に入っている瞬間です！', memories_button: '全ての写真を見る &rarr;',
                quiz_title: '私たちに関するミニクイズ',
                q1_text: '質問1：私たちの中で、誰が一番國鴻先生とおしゃべりするのが好きでしょう？',
                q2_text: '質問2：インドネシア語の「ありがとう」はどれですか？',
                q2_op1: 'Sama-sama', q2_op2: 'Halo', q2_op3: 'Terima kasih', q2_op4: 'Selamat pagi',
                q3_text: '質問3：私たちが一緒に食べに行くと約束した台湾のデザートは何でしょう？',
                q3_op1: 'タピオカミルクティー', q3_op2: 'マンゴーかき氷', q3_op3: '豆花', q3_op4: '今川焼き',
                quiz_correct: '正解です！さすが先生！', quiz_incorrect: '残念、不正解です！',
                messages_title: '先生へのメッセージ...',
                msg_a_from: '葉怡嫻 (Elain) からのメッセージ', msg_a_content: "「Sasaya～～このサイトは私が作ったんですよ(⁎⁍̴̛ᴗ⁍̴̛⁎) ぬいぐるみは朱書靚と劉芷瑩が作りました～ 私たち、すごく時間をかけたんです。それと、どうしてフライングで豆花を食べちゃったんですか？私たちの豆花デートの約束はどうなるんですか？(´･Д･)」」",
                msg_b_from: '朱書靚 (Jessica) からのメッセージ', msg_b_content: "「先生、私は嘉義の布袋の肉圓（バーワン）は彰化のものより美味しいと思います」",
                msg_c_from: '劉芷瑩 (Laura) からのメッセージ', msg_c_content: "「先生！連休中に用事があって、一緒に遊びに行く機会を逃してしまって本当に残念です... もしまた機会があれば、國鴻先生も誘って一緒に遊びに行きましょう♪」",
                msg_d_from: '陳品瑜 (Phoebe) からのメッセージ', msg_d_content: "「先生～豆花はもう食べちゃったみたいですけど、嘉義の鶏肉飯はどのお店が好きですか？一緒に食べに行きませんか？*(*´∀｀*)☆」",
                footer_greeting: '台湾で会えるのを楽しみにしています！', 
                footer_contact: '何か質問があれば、いつでもご連絡ください！',
                footer_contact_info_text: '連絡先：',
            }
        };

        const langZhBtn = document.getElementById('lang-zh');
        const langJaBtn = document.getElementById('lang-ja');
        const geminiPromptInputEl = document.getElementById('gemini-prompt');

        function setLanguage(lang) {
            document.documentElement.lang = lang === 'zh' ? 'zh-Hant' : 'ja';
            const elements = document.querySelectorAll('[data-key]');
            elements.forEach(el => {
                const key = el.getAttribute('data-key');
                if (translations[lang] && translations[lang][key]) {
                    el.innerHTML = translations[lang][key];
                }
            });

            if (lang === 'zh') {
                langZhBtn.classList.add('active-lang');
                langJaBtn.classList.remove('active-lang');
                if(geminiPromptInputEl) geminiPromptInputEl.placeholder = "例如：嘉義有什麼必買的伴手禮？";
            } else {
                langJaBtn.classList.add('active-lang');
                langZhBtn.classList.remove('active-lang');
                if(geminiPromptInputEl) geminiPromptInputEl.placeholder = "例：嘉義で必ず買うべきお土産は何ですか？";
            }
            localStorage.setItem('language', lang);
        }
        
        langZhBtn.addEventListener('click', () => setLanguage('zh'));
        langJaBtn.addEventListener('click', () => setLanguage('ja'));
        
        document.addEventListener('DOMContentLoaded', () => {
            const savedLang = localStorage.getItem('language') || 'zh';
            setLanguage(savedLang);

            const correctAnswers = { 1: 'A', 2: 'C', 3: 'C' };

            document.querySelectorAll('#quiz .bg-white').forEach((quizBlock, index) => {
                const questionNumber = index + 1;
                const options = quizBlock.querySelectorAll('.quiz-option');
                options.forEach(button => {
                    button.addEventListener('click', (event) => {
                        const selectedAnswer = event.currentTarget.getAttribute('data-answer');
                        handleAnswer(questionNumber, selectedAnswer, options);
                    });
                });
            });

            function handleAnswer(questionNumber, selectedAnswer, options) {
                const currentLang = localStorage.getItem('language') || 'zh';
                const resultElement = document.getElementById(`q${questionNumber}-result`);
                const correctAnswer = correctAnswers[questionNumber];

                options.forEach(button => {
                    button.disabled = true;
                    const buttonAnswer = button.getAttribute('data-answer');
                    if (buttonAnswer === correctAnswer) { 
                        button.classList.add('correct'); 
                    }
                });

                if (selectedAnswer === correctAnswer) {
                    resultElement.textContent = translations[currentLang].quiz_correct;
                    resultElement.style.color = '#16a34a';
                } else {
                    resultElement.textContent = translations[currentLang].quiz_incorrect;
                    resultElement.style.color = '#ef4444';
                    options.forEach(button => { 
                        if (button.getAttribute('data-answer') === selectedAnswer) {
                            button.classList.add('incorrect');
                        }
                    });
                }
                resultElement.classList.remove('hidden');
            }
        });

        // Gemini API Logic
        const geminiSubmitBtn = document.getElementById('gemini-submit');
        const geminiPromptInput = document.getElementById('gemini-prompt');
        const geminiResponseContainer = document.getElementById('gemini-response');
        const geminiLoadingIndicator = document.getElementById('gemini-loading');

        async function callGemini(prompt) {
            if (!geminiSubmitBtn) return; 

            geminiResponseContainer.textContent = '';
            geminiLoadingIndicator.classList.remove('hidden');
            geminiSubmitBtn.disabled = true;

            const apiKey = "AIzaSyB2httEeB9lczPckNlG8es_nseTV0B8Kj8"; 
            
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            const systemPrompt = "You are a friendly and knowledgeable tour guide for Chiayi, Taiwan. You are helping Professor Sasaya, who is visiting his students (葉怡嫻, 朱書靚, 劉芷瑩, 陳品瑜). Answer his questions about Chiayi or Taiwan concisely and cheerfully in a single paragraph. Respond in the language of the user's query (Traditional Chinese or Japanese).";

            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
                tools: [{ "google_search": {} }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
            };

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                if (!response.ok) throw new Error(`API call failed with status: ${response.status}`);
                const result = await response.json();
                const candidate = result.candidates?.[0];
                if (candidate && candidate.content?.parts?.[0]?.text) {
                    geminiResponseContainer.textContent = candidate.content.parts[0].text;
                } else {
                    geminiResponseContainer.textContent = '抱歉，無法生成回覆。請再試一次。';
                    console.error('Unexpected API response structure:', result);
                }
            } catch (error) {
                console.error('Error calling Gemini API:', error);
                geminiResponseContainer.textContent = '發生錯誤，請查看主控台以獲取詳細資訊。';
            } finally {
                geminiLoadingIndicator.classList.add('hidden');
                geminiSubmitBtn.disabled = false;
            }
        }

        if(geminiSubmitBtn) {
            geminiSubmitBtn.addEventListener('click', () => {
                const userPrompt = geminiPromptInput.value.trim();
                if (userPrompt) callGemini(userPrompt);
            });
        }
    </script>
</body>
</html>

